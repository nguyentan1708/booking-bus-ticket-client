{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n/**\n * Creates and returns a history object that uses HTML5's history API\n * (pushState, replaceState, and the popstate event) to manage history.\n * This is the recommended method of managing history in browsers because\n * it provides the cleanest URLs.\n *\n * Note: In browsers that do not support the HTML5 history API full\n * page reloads will be used to preserve URLs.\n */\n\n\nfunction createBrowserHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Browser history needs a DOM') : _invariant2['default'](false) : undefined;\n  var forceRefresh = options.forceRefresh;\n\n  var isSupported = _DOMUtils.supportsHistory();\n\n  var useRefresh = !isSupported || forceRefresh;\n\n  function getCurrentLocation(historyState) {\n    try {\n      historyState = historyState || window.history.state || {};\n    } catch (e) {\n      historyState = {};\n    }\n\n    var path = _DOMUtils.getWindowPath();\n\n    var _historyState = historyState;\n    var key = _historyState.key;\n    var state = undefined;\n\n    if (key) {\n      state = _DOMStateStorage.readState(key);\n    } else {\n      state = null;\n      key = history.createKey();\n      if (isSupported) window.history.replaceState(_extends({}, historyState, {\n        key: key\n      }), null);\n    }\n\n    var location = _PathUtils.parsePath(path);\n\n    return history.createLocation(_extends({}, location, {\n      state: state\n    }), undefined, key);\n  }\n\n  function startPopStateListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function popStateListener(event) {\n      if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n      transitionTo(getCurrentLocation(event.state));\n    }\n\n    _DOMUtils.addEventListener(window, 'popstate', popStateListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'popstate', popStateListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    _DOMStateStorage.saveState(key, state);\n\n    var path = (basename || '') + pathname + search + hash;\n    var historyState = {\n      key: key\n    };\n\n    if (action === _Actions.PUSH) {\n      if (useRefresh) {\n        window.location.href = path;\n        return false; // Prevent location update.\n      } else {\n        window.history.pushState(historyState, null, path);\n      }\n    } else {\n      // REPLACE\n      if (useRefresh) {\n        window.location.replace(path);\n        return false; // Prevent location update.\n      } else {\n        window.history.replaceState(historyState, null, path);\n      }\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopPopStateListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n    var unlisten = history.listenBefore(listener);\n    return function () {\n      unlisten();\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n    var unlisten = history.listen(listener);\n    return function () {\n      unlisten();\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  } // deprecated\n\n\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n    history.registerTransitionHook(hook);\n  } // deprecated\n\n\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n    if (--listenerCount === 0) stopPopStateListener();\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    registerTransitionHook: registerTransitionHook,\n    unregisterTransitionHook: unregisterTransitionHook\n  });\n}\n\nexports['default'] = createBrowserHistory;\nmodule.exports = exports['default'];","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_interopRequireDefault","obj","_invariant","require","_invariant2","_Actions","_PathUtils","_ExecutionEnvironment","_DOMUtils","_DOMStateStorage","_createDOMHistory","_createDOMHistory2","createBrowserHistory","options","undefined","canUseDOM","process","env","NODE_ENV","forceRefresh","isSupported","supportsHistory","useRefresh","getCurrentLocation","historyState","window","history","state","e","path","getWindowPath","_historyState","readState","createKey","replaceState","location","parsePath","createLocation","startPopStateListener","_ref","transitionTo","popStateListener","event","addEventListener","removeEventListener","finishTransition","basename","pathname","search","hash","action","POP","saveState","PUSH","href","pushState","replace","listenerCount","stopPopStateListener","listenBefore","listener","unlisten","listen","registerTransitionHook","hook","unregisterTransitionHook","module"],"sources":["/Users/votannguyen/Downloads/booking-bus-ticket-client/node_modules/react-router-native/node_modules/history/lib/createBrowserHistory.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\n/**\n * Creates and returns a history object that uses HTML5's history API\n * (pushState, replaceState, and the popstate event) to manage history.\n * This is the recommended method of managing history in browsers because\n * it provides the cleanest URLs.\n *\n * Note: In browsers that do not support the HTML5 history API full\n * page reloads will be used to preserve URLs.\n */\nfunction createBrowserHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Browser history needs a DOM') : _invariant2['default'](false) : undefined;\n\n  var forceRefresh = options.forceRefresh;\n\n  var isSupported = _DOMUtils.supportsHistory();\n  var useRefresh = !isSupported || forceRefresh;\n\n  function getCurrentLocation(historyState) {\n    try {\n      historyState = historyState || window.history.state || {};\n    } catch (e) {\n      historyState = {};\n    }\n\n    var path = _DOMUtils.getWindowPath();\n    var _historyState = historyState;\n    var key = _historyState.key;\n\n    var state = undefined;\n    if (key) {\n      state = _DOMStateStorage.readState(key);\n    } else {\n      state = null;\n      key = history.createKey();\n\n      if (isSupported) window.history.replaceState(_extends({}, historyState, { key: key }), null);\n    }\n\n    var location = _PathUtils.parsePath(path);\n\n    return history.createLocation(_extends({}, location, { state: state }), undefined, key);\n  }\n\n  function startPopStateListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function popStateListener(event) {\n      if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n      transitionTo(getCurrentLocation(event.state));\n    }\n\n    _DOMUtils.addEventListener(window, 'popstate', popStateListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'popstate', popStateListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    _DOMStateStorage.saveState(key, state);\n\n    var path = (basename || '') + pathname + search + hash;\n    var historyState = {\n      key: key\n    };\n\n    if (action === _Actions.PUSH) {\n      if (useRefresh) {\n        window.location.href = path;\n        return false; // Prevent location update.\n      } else {\n          window.history.pushState(historyState, null, path);\n        }\n    } else {\n      // REPLACE\n      if (useRefresh) {\n        window.location.replace(path);\n        return false; // Prevent location update.\n      } else {\n          window.history.replaceState(historyState, null, path);\n        }\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopPopStateListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listenBefore(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listen(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    history.registerTransitionHook(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n\n    if (--listenerCount === 0) stopPopStateListener();\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    registerTransitionHook: registerTransitionHook,\n    unregisterTransitionHook: unregisterTransitionHook\n  });\n}\n\nexports['default'] = createBrowserHistory;\nmodule.exports = exports['default'];"],"mappings":"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"},"metadata":{},"sourceType":"script"}